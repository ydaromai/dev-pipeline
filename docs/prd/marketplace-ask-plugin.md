# PRD: Add /ask as a Standalone Marketplace Plugin

## Status: DRAFT
## Author: Generated by AI, owned by human
## Date: 2026-02-25

---

## 1. Problem Statement

The dev-pipeline marketplace currently offers only one plugin (`dev-pipeline`) which includes the entire pipeline suite (8 commands, 6 critic agents, JIRA scripts). Users who only want the `/ask` read-only Q&A command must install the full pipeline. We need to offer `/ask` as a lightweight standalone plugin in the marketplace so users can install it independently.

## 2. Target Users

- Claude Code users who want a safe, read-only Q&A command without the full pipeline
- Teams that want to distribute `/ask` to developers who don't need JIRA integration or pipeline orchestration

## 3. Goals

- `/ask` installable as a standalone plugin via `/plugin install ask@ydaromai-tools`
- Zero duplication of the ask command source (single source of truth)
- Marketplace validates cleanly after the change

## 4. Non-Goals (Explicitly Out of Scope)

- Modifying the `/ask` command itself — the command content stays identical
- Breaking out other commands as standalone plugins
- Changing the existing `dev-pipeline` plugin entry
- Publishing to any external marketplace registry

## 5. User Stories

### US-1: Install /ask independently
**As a** Claude Code user, **I want** to install just the `/ask` command from the ydaromai-tools marketplace, **so that** I get a read-only Q&A skill without the full pipeline.

**Acceptance Criteria:**
- [ ] AC 1.1: `/plugin install ask@ydaromai-tools` succeeds
- [ ] AC 1.2: After install, `/ask` is available as a slash command
- [ ] AC 1.3: The standalone `ask` plugin does not include pipeline commands, agents, or scripts

### US-2: Single source of truth for ask.md
**As a** maintainer, **I want** the standalone ask plugin to use the same `ask.md` file as the main pipeline, **so that** I don't have to maintain two copies.

**Acceptance Criteria:**
- [ ] AC 2.1: `plugins/ask/commands/ask.md` is a symlink to `../../../commands/ask.md`
- [ ] AC 2.2: The symlink resolves correctly (file is readable)

### US-3: Marketplace validation
**As a** maintainer, **I want** the marketplace to validate cleanly after adding the ask plugin, **so that** the marketplace is distributable.

**Acceptance Criteria:**
- [ ] AC 3.1: `claude plugin validate .` passes with no errors
- [ ] AC 3.2: `marketplace.json` contains an entry for `ask` with correct source path

## 6. Functional Requirements

### Must Have (P0)

- **FR-1:** Create `plugins/ask/.claude-plugin/plugin.json`:
  ```json
  {
    "name": "ask",
    "version": "1.0.0",
    "description": "Read-only Q&A skill — ask anything about your codebase without modifying files"
  }
  ```
- **FR-2:** Create `plugins/ask/commands/` directory with a symlink `ask.md → ../../../commands/ask.md`
- **FR-3:** Add `ask` plugin entry to `.claude-plugin/marketplace.json`:
  ```json
  {
    "name": "ask",
    "source": "./plugins/ask",
    "description": "Read-only Q&A skill — ask anything about your codebase without modifying files",
    "version": "1.0.0"
  }
  ```

### Should Have (P1)

None.

### Nice to Have (P2)

None.

## 7. Acceptance Criteria (Consolidated)

### P0 — Must Pass for Launch
- [ ] AC 1.1: `/plugin install ask@ydaromai-tools` succeeds
- [ ] AC 1.2: After install, `/ask` is available as a slash command
- [ ] AC 1.3: The standalone `ask` plugin does not include pipeline commands, agents, or scripts
- [ ] AC 2.1: `plugins/ask/commands/ask.md` is a symlink to `../../../commands/ask.md`
- [ ] AC 2.2: The symlink resolves correctly
- [ ] AC 3.1: `claude plugin validate .` passes with no errors
- [ ] AC 3.2: `marketplace.json` contains an entry for `ask`

## 8. Non-Functional Requirements

- No logic changes to the `/ask` command
- Symlink must be relative (not absolute) for portability

## 9. Testing Strategy

| User Story | Unit | Integration | UI | E2E | Notes |
|-----------|------|-------------|-----|-----|-------|
| US-1 | No | No | No | Yes | Manual: `claude plugin install ask@ydaromai-tools` then verify `/ask` works |
| US-2 | No | No | No | No | `readlink plugins/ask/commands/ask.md` returns `../../../commands/ask.md`; `cat plugins/ask/commands/ask.md` succeeds |
| US-3 | No | No | No | No | `claude plugin validate .` exits 0 with no errors |

**Negative test:** If `commands/ask.md` is missing, the symlink is broken and `claude plugin validate .` should report an error — confirming the symlink dependency is enforced.

**Note:** AC 1.1 and 1.2 are manual E2E tests verified pre-merge. All other ACs are automatable via CLI commands.

## 10. Technical Context & Constraints

- Claude Code plugins can't reference files outside their directory with `../` — but symlinks are followed during plugin copying/caching
- The marketplace repo is `ydaromai/dev-pipeline` on GitHub
- `${CLAUDE_PLUGIN_ROOT}` is not relevant here — `/ask` has no pipeline path references

## 11. Success Metrics

N/A — this is a developer tooling change with no client-side tracking.

## 12. Open Questions

None.

## 13. Dependencies & Risks

| Risk | Impact | Likelihood | Mitigation |
|------|--------|------------|------------|
| Symlink not followed by plugin cache | High | Low | Claude Code docs confirm symlinks are followed during copying |
| Symlink breaks if repo restructured | Medium | Low | `claude plugin validate .` catches broken symlinks; symlink path is relative and short (`../../../commands/ask.md`) |

## 14. Timeline Estimate

- Single task, ~10 minutes
